# CSV一括登録機能

## 概要

週間メニューと月間メニューをCSVファイルで一括登録できる機能を実装しました。

## CSVフォーマット

### 週間メニュー

```csv
曜日,カテゴリー,メニュー名,価格
1,ランチ,本日のランチセット,1200
2,ディナー,本日のディナー,2500
3,ランチ,ハンバーグ定食,1500
```

**列の説明:**
- **曜日**: 0=日曜日、1=月曜日、2=火曜日...6=土曜日（必須）
- **カテゴリー**: 任意（例: ランチ、ディナー、デザート）
- **メニュー名**: 必須
- **価格**: 任意（数値のみ、円単位）

### 月間メニュー

```csv
カテゴリー,メニュー名,価格
ランチ,本日のランチセット,1200
ディナー,本日のディナー,2500
デザート,チーズケーキ,600
```

**列の説明:**
- **カテゴリー**: 任意（例: ランチ、ディナー、デザート）
- **メニュー名**: 必須
- **価格**: 任意（数値のみ、円単位）

## 使い方

### 1. CSV一括登録ページにアクセス

- **週間メニュー**: `/admin/menus/weekly` → 「📄 CSV一括登録」ボタンをクリック
- **月間メニュー**: `/admin/menus/monthly` → 「📄 CSV一括登録」ボタンをクリック

### 2. テンプレートをダウンロード

ページ内の「📥 テンプレートをダウンロード」ボタンから、CSVテンプレートをダウンロードできます。

### 3. CSVファイルを作成

テンプレートを参考に、メニュー情報を入力したCSVファイルを作成します。

### 4. CSVファイルをアップロード

- 週の開始日（週間メニューの場合）または年月（月間メニューの場合）を選択
- CSVファイルを選択
- 「インポート」ボタンをクリック

### 5. 結果を確認

インポート結果が表示されます：
- ✅ 成功した件数
- ❌ エラーが発生した件数と詳細

## エラーハンドリング

CSVの各行でバリデーションが行われ、エラーがある場合は詳細が表示されます：

- 必須項目が不足している場合
- データ形式が正しくない場合（例: 曜日が0-6の範囲外）
- 価格が数値でない場合

エラーがあっても、正常な行は登録されます。

## 注意事項

- CSVファイルはUTF-8エンコーディングで保存してください
- ヘッダー行（1行目）は必須です
- 空行は自動的にスキップされます
- 同じ曜日・週開始日の組み合わせ（週間メニュー）や同じメニュー名・年月の組み合わせ（月間メニュー）は更新されます

## APIエンドポイント

- `POST /api/csv-import/weekly` - 週間メニューのCSVインポート
- `POST /api/csv-import/monthly` - 月間メニューのCSVインポート

## 技術的な詳細

- バックエンド: `csv-parse`ライブラリを使用してCSVをパース
- フロントエンド: `FormData`を使用してファイルをアップロード
- エラーハンドリング: 行ごとにバリデーションとエラーレポート







