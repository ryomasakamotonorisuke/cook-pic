# Supabase Authã‚’ä½¿ç”¨ã—ãŸãƒ­ã‚°ã‚¤ãƒ³è¨­å®š

## ğŸ” ç¾åœ¨ã®çŠ¶æ³

Supabase Authã§ä½œæˆã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆ`admin@admin.com`ï¼‰ã§ãƒ­ã‚°ã‚¤ãƒ³ã—ãŸã„å ´åˆã®è¨­å®šæ–¹æ³•ã§ã™ã€‚

## ğŸ› ï¸ è¨­å®šæ‰‹é †

### ã‚¹ãƒ†ãƒƒãƒ—1: Supabase Authã®ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‚’ç¢ºèª

1. Supabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ãƒ­ã‚°ã‚¤ãƒ³
2. ã€ŒAuthenticationã€â†’ã€ŒUsersã€ã‚’é–‹ã
3. `admin@admin.com` ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ¢ã™
4. **ãƒ¦ãƒ¼ã‚¶ãƒ¼IDï¼ˆUUIDï¼‰ã‚’ã‚³ãƒ”ãƒ¼**

### ã‚¹ãƒ†ãƒƒãƒ—2: system_adminsãƒ†ãƒ¼ãƒ–ãƒ«ã«é–¢é€£ä»˜ã‘ã‚‹

Supabaseã®SQL Editorã§ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š

```sql
-- æ–¹æ³•1: æ—¢å­˜ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã®IDã‚’æ›´æ–°
UPDATE system_admins 
SET id = 'Supabase Authã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ID'
WHERE email = 'admin@admin.com';

-- æ–¹æ³•2: æ—¢å­˜ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’å‰Šé™¤ã—ã¦æ–°ã—ã„IDã§ä½œæˆ
DELETE FROM system_admins WHERE email = 'admin@admin.com';

INSERT INTO system_admins (id, username, password_hash, name, email)
VALUES (
  'Supabase Authã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ID',
  'admin',
  '', -- password_hashã¯ä¸è¦ï¼ˆSupabase Authã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ï¼‰
  'ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…',
  'admin@admin.com'
);
```

### ã‚¹ãƒ†ãƒƒãƒ—3: ãƒ­ã‚°ã‚¤ãƒ³ã‚’è©¦ã™

1. `/system-admin/login` ã«ã‚¢ã‚¯ã‚»ã‚¹
2. **ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹**: `admin@admin.com`
3. **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰**: `Sys%ngf6299!`
4. ã€Œãƒ­ã‚°ã‚¤ãƒ³ã€ã‚’ã‚¯ãƒªãƒƒã‚¯

## ğŸ“‹ æ–°ã—ã„ãƒ­ã‚°ã‚¤ãƒ³API

`/api/auth/system-admin/login-supabase-auth` ãŒä½œæˆã•ã‚Œã¾ã—ãŸã€‚

ã“ã®APIã¯ï¼š
- Supabase Authã‚’ä½¿ç”¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³
- `system_admins`ãƒ†ãƒ¼ãƒ–ãƒ«ã§ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…ã‹ã©ã†ã‹ã‚’ç¢ºèª
- ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…ã®å ´åˆã€ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¿”ã™

## âœ… ç¢ºèªãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] Supabase Authã®ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‚’ç¢ºèªã—ãŸ
- [ ] `system_admins`ãƒ†ãƒ¼ãƒ–ãƒ«ã®IDã‚’Supabase Authã®ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã«æ›´æ–°ã—ãŸ
- [ ] ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã§ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ãŸ
- [ ] ãƒ­ã‚°ã‚¤ãƒ³ã‚’è©¦ã—ãŸ

## ğŸ” ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚¨ãƒ©ãƒ¼: "ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…ã¨ã—ã¦ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“"

**åŸå› **: `system_admins`ãƒ†ãƒ¼ãƒ–ãƒ«ã«è©²å½“ã™ã‚‹ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒç™»éŒ²ã•ã‚Œã¦ã„ãªã„

**è§£æ±ºæ–¹æ³•**:
```sql
-- Supabase Authã®ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‚’ç¢ºèªã—ã¦ã‹ã‚‰å®Ÿè¡Œ
INSERT INTO system_admins (id, username, password_hash, name, email)
VALUES (
  'Supabase Authã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ID',
  'admin',
  '',
  'ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…',
  'admin@admin.com'
);
```

### ã‚¨ãƒ©ãƒ¼: "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¾ãŸã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“"

**åŸå› **: Supabase Authã®èªè¨¼ã«å¤±æ•—

**è§£æ±ºæ–¹æ³•**:
- ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒ `admin@admin.com` ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒ `Sys%ngf6299!` ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
- Supabase Authã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ­£ã—ãä½œæˆã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

## ğŸ“ ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±

- **URL**: `/system-admin/login`
- **ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹**: `admin@admin.com`
- **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰**: `Sys%ngf6299!`

