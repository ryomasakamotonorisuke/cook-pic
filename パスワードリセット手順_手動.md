# PostgreSQLパスワードリセット手順（手動）

## 手順

### ステップ1: PostgreSQLサービスを停止

1. **Windowsキー + R** を押す
2. `services.msc` と入力してEnter
3. 「**postgresql-x64-18**」を探す
4. 右クリック → 「**停止**」を選択

### ステップ2: pg_hba.confファイルを編集

1. エクスプローラーで以下を開く：
   ```
   C:\Program Files\PostgreSQL\18\data\
   ```
2. **`pg_hba.conf`** ファイルを探す
3. **管理者権限でメモ帳を開く**：
   - スタートメニューで「メモ帳」を検索
   - 「メモ帳」を右クリック → 「管理者として実行」
   - メモ帳で `C:\Program Files\PostgreSQL\18\data\pg_hba.conf` を開く

4. 以下の行を探す（複数ある場合があります）：
   ```
   host    all             all             127.0.0.1/32            scram-sha-256
   ```
   または
   ```
   host    all             all             ::1/128                 scram-sha-256
   ```

5. これらの行の `scram-sha-256` を `trust` に変更：
   ```
   host    all             all             127.0.0.1/32            trust
   host    all             all             ::1/128                 trust
   ```

6. **ファイルを保存**（Ctrl + S）

### ステップ3: PostgreSQLサービスを起動

1. サービス画面に戻る
2. 「**postgresql-x64-18**」を右クリック → 「**開始**」を選択

### ステップ4: パスワードを設定

PowerShellで以下を実行：

```powershell
$psqlPath = "C:\Program Files\PostgreSQL\18\bin\psql.exe"
& $psqlPath -U postgres -c "ALTER USER postgres WITH PASSWORD 'postgres';"
```

### ステップ5: pg_hba.confを元に戻す

1. メモ帳で `pg_hba.conf` を再度開く（管理者権限で）
2. `trust` を `scram-sha-256` に戻す
3. ファイルを保存

### ステップ6: PostgreSQLサービスを再起動

1. サービス画面で「**postgresql-x64-18**」を右クリック → 「**再起動**」

### ステップ7: データベースを作成

PowerShellで：

```powershell
$psqlPath = "C:\Program Files\PostgreSQL\18\bin\psql.exe"
$env:PGPASSWORD = "postgres"
& $psqlPath -U postgres -c "CREATE DATABASE pic_cul;"
```

### ステップ8: マイグレーション実行

```powershell
cd C:\Users\ngf005148\Desktop\webapps\Pic_cul\backend
npm run db:migrate
npm run db:seed
```

### ステップ9: 開発サーバー起動

```powershell
cd ..
npm run dev
```

## 注意事項

- `pg_hba.conf`の編集には管理者権限が必要です
- ファイルを編集する前に、バックアップを取ることを推奨します
- ステップ5で必ず`trust`を`scram-sha-256`に戻してください（セキュリティのため）











