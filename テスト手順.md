# Pic_cul テスト手順

## 同時テスト環境のセットアップ

店舗側（管理者）と利用者側を同時にテストするための手順です。

## 前提条件

1. **開発サーバーの起動**
   ```bash
   # バックエンドサーバー（ポート3001）
   cd backend
   npm run dev

   # フロントエンドサーバー（ポート3000）
   cd frontend
   npm run dev
   ```

2. **データベースの準備**
   - PostgreSQLが起動していること
   - マイグレーションとシードが実行済みであること

## テスト手順

### 1. 利用者側のテスト（ブラウザウィンドウ1）

1. **ブラウザを開く**
   - `http://localhost:3000` にアクセス
   - 自動的に `/user/access` にリダイレクトされます

2. **アクセス方法（2通り）**

   **方法A: 店舗IDを入力**
   - 店舗ID欄に `sample-store-001` を入力
   - 「メニューを見る」ボタンをクリック
   - メニューフィード画面が表示されます

   **方法B: QRコードをスキャン**
   - 「QRコードをスキャン」ボタンをクリック
   - QRコードをスキャン（店舗IDが含まれているQRコード）
   - 自動的にメニューフィード画面に遷移します

3. **メニューの確認**
   - 日間メニューが表示されることを確認
   - ピン留めメニューが最上部に表示されることを確認
   - カテゴリーや価格が正しく表示されることを確認

### 2. 店舗側のテスト（ブラウザウィンドウ2）

1. **新しいブラウザウィンドウまたはシークレットモードを開く**
   - `http://localhost:3000/admin/login` にアクセス

2. **管理者ログイン**
   - **店舗ID**: `sample-store-001`
   - **パスワード**: `password123`
   - 「ログイン」ボタンをクリック

3. **管理画面の操作**

   **日間メニューの投稿**
   - 「日間メニューを投稿」をクリック
   - メニュー名、カテゴリー、価格、画像を入力
   - 「投稿する」ボタンをクリック
   - 利用者側のブラウザをリロードして、新しいメニューが表示されることを確認

   **週間メニューの設定**
   - 「週間メニュー設定」をクリック
   - 曜日ごとのメニューを設定
   - 画像も追加可能
   - 利用者側で週間メニューが表示されることを確認

   **月間メニューの設定**
   - 「月間メニュー設定」をクリック
   - 月ごとのメニューを設定
   - 画像も追加可能

   **メニューのピン留め**
   - 「メニュー一覧・編集」をクリック
   - ピン留めしたいメニューの「📌 ピン留め」ボタンをクリック
   - 利用者側でピン留めメニューが最上部に表示されることを確認

   **メニューの編集・削除**
   - 「メニュー一覧・編集」から編集・削除が可能

## 同時テストのポイント

### リアルタイム更新の確認

1. **店舗側でメニューを投稿**
   - 新しいメニューを投稿

2. **利用者側で確認**
   - ブラウザをリロード（F5）
   - 新しいメニューが表示されることを確認

3. **ピン留め機能の確認**
   - 店舗側でメニューをピン留め
   - 利用者側でリロード
   - ピン留めメニューが最上部に表示されることを確認

### 推奨ブラウザ設定

- **ウィンドウ1**: 通常モード（利用者側）
- **ウィンドウ2**: シークレットモードまたは別ブラウザ（店舗側）

これにより、CookieやLocalStorageが分離され、より正確なテストが可能です。

## テスト項目チェックリスト

### 利用者側
- [ ] 店舗ID入力でアクセスできる
- [ ] QRコードスキャンでアクセスできる
- [ ] メニューフィードが表示される
- [ ] ピン留めメニューが最上部に表示される
- [ ] カテゴリーが表示される
- [ ] 価格が表示される
- [ ] 画像が表示される

### 店舗側
- [ ] 管理者ログインができる
- [ ] 日間メニューを投稿できる
- [ ] 週間メニューを設定できる
- [ ] 月間メニューを設定できる
- [ ] メニューに画像を追加できる
- [ ] メニューをピン留めできる
- [ ] メニューを編集できる
- [ ] メニューを削除できる
- [ ] CSV一括登録ができる（週間・月間）

## トラブルシューティング

### メニューが表示されない場合

1. **バックエンドサーバーが起動しているか確認**
   ```bash
   cd backend
   npm run dev
   ```

2. **データベース接続を確認**
   - PostgreSQLが起動しているか
   - `.env`ファイルの設定が正しいか

3. **ブラウザのコンソールを確認**
   - F12キーで開発者ツールを開く
   - Consoleタブでエラーを確認

### ログインできない場合

- 店舗IDとパスワードが正しいか確認
- バックエンドサーバーが起動しているか確認
- ブラウザのコンソールでエラーを確認

### 画像が表示されない場合

- 画像のパスが正しいか確認
- Base64エンコードが正しく行われているか確認
- ブラウザのコンソールでエラーを確認

## 開発環境URL一覧

- **フロントエンド**: http://localhost:3000
- **バックエンドAPI**: http://localhost:3001
- **利用者アクセス**: http://localhost:3000/user/access
- **管理者ログイン**: http://localhost:3000/admin/login
- **管理者ダッシュボード**: http://localhost:3000/admin/dashboard

## サンプルデータ

### テスト用店舗情報
- **店舗ID**: `sample-store-001`
- **パスワード**: `password123`

### テスト用メニュー例
- **メニュー名**: 本日のランチセット
- **カテゴリー**: ランチ
- **価格**: 1200円
- **画像**: 任意の画像ファイル







